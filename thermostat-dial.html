<script type="text/javascript">
    RED.nodes.registerType('thermostat-dial', {
        category: 'dashboard',
        color: '#E36304',
        defaults: {
            name: {value: ""},
            group: {type: "ui_group", required: true},
            order: {value: 0},
            width: {value: 6},
            height: {value: 6},
            minTemp: {value: 10, validate: RED.validators.number()},
            maxTemp: {value: 30, validate: RED.validators.number()},
            hysteresis: {value: 0.1, validate: RED.validators.number()},
            mode: {value: "heat"},
            awayOffset: {value: -3, validate: RED.validators.number()}
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-thermometer-half",
        label: function() {
            return this.name || "Thermostat Dial";
        },
        paletteLabel: "thermostat dial"
    });
</script>

<script type="text/html" data-template-name="thermostat-dial">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label for="node-input-width"><i class="fa fa-arrows-h"></i> Width</label>
        <input type="number" id="node-input-width" placeholder="6" style="width: 100px">
    </div>
    <div class="form-row">
        <label for="node-input-height"><i class="fa fa-arrows-v"></i> Height</label>
        <input type="number" id="node-input-height" placeholder="6" style="width: 100px">
    </div>
    <div class="form-row">
        <label for="node-input-minTemp"><i class="fa fa-thermometer-empty"></i> Min Temp</label>
        <input type="number" id="node-input-minTemp" placeholder="10" style="width: 100px"> ¬∞C
    </div>
    <div class="form-row">
        <label for="node-input-maxTemp"><i class="fa fa-thermometer-full"></i> Max Temp</label>
        <input type="number" id="node-input-maxTemp" placeholder="30" style="width: 100px"> ¬∞C
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-cog"></i> Mode</label>
        <select id="node-input-mode" style="width: 200px">
            <option value="heat">üî• Chauffage</option>
            <option value="cool">‚ùÑÔ∏è Refroidissement</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-hysteresis"><i class="fa fa-sliders"></i> Hyst√©r√©sis</label>
        <input type="number" id="node-input-hysteresis" placeholder="0.1" step="0.1" style="width: 100px"> ¬∞C
    </div>
    <div class="form-row">
        <label for="node-input-awayOffset"><i class="fa fa-suitcase"></i> Away Offset</label>
        <input type="number" id="node-input-awayOffset" placeholder="-3" step="0.5" style="width: 100px"> ¬∞C
    </div>
    <div class="form-row">
        <label for="node-input-order"><i class="fa fa-sort-numeric-asc"></i> Order</label>
        <input type="number" id="node-input-order" placeholder="0" style="width: 100px">
    </div>
</script>

<script type="text/html" data-help-name="thermostat-dial">
    <p>Un thermostat circulaire interactif de style Nest avec hyst√©r√©sis et mode Away.</p>
    
    <h3>Entr√©e</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
            <ul>
                <li><code>ambient_temperature</code> - Temp√©rature ambiante actuelle</li>
                <li><code>target_temperature</code> - Temp√©rature cible</li>
                <li><code>mode</code> - Mode (heat/cool) - optionnel</li>
                <li><code>hysteresis</code> - Hyst√©r√©sis - optionnel</li>
                <li><code>awayOffset</code> - Offset en mode Away - optionnel</li>
                <li><code>has_leaf</code> - Afficher l'ic√¥ne feuille - optionnel</li>
                <li><code>away</code> - Mode Away actif - optionnel</li>
            </ul>
        </dd>
    </dl>

    <h3>Sortie</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
            Objet contenant tous les param√®tres incluant target_temperature modifi√© et hvac_state calcul√©
        </dd>
    </dl>

    <h3>D√©tails</h3>
    <p>Le thermostat affiche la temp√©rature cible au centre et la temp√©rature ambiante sur le cadran.</p>
    <p>Cliquez sur l'ic√¥ne valise en bas pour activer/d√©sactiver le mode Away.</p>
    <p>Glissez sur le thermostat pour ajuster la temp√©rature cible.</p>
</script>
